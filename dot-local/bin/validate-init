#!/usr/bin/env bash
# Validate that 'make init' created required directories

set -euo pipefail

echo "=== Validating init directories ==="
echo ""

REQUIRED_DIRS=(
  "$HOME/.local/bin"
  "$HOME/.cache/nvim"
  "$HOME/.local/state/nvim"
  "$HOME/.local/share/nvim/luals/logs"
  "$HOME/.local/share/nvim/luals/meta"
)

FAILED=0

for dir in "${REQUIRED_DIRS[@]}"; do
  if [ -d "$dir" ]; then
    echo "✓ $dir exists"
  else
    echo "✗ $dir missing" >&2
    FAILED=1
  fi
done

echo ""
if [ $FAILED -eq 0 ]; then
  echo "✅ All required directories exist"
  exit 0
else
  echo "❌ Some directories are missing" >&2
  exit 1
fi
